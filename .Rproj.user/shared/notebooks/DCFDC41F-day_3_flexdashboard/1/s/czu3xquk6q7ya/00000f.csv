"0","#install.packages(""leaflet"")"
"0","library(leaflet)"
"0",""
"0","mybins <- c(0,60,120,240,480,Inf) #definir categorias de incidencia"
"0","mycolors <- c(""#f7f7f7"",""#fee391"",""#fb6a4a"",""#cb181d"",""#67000d"") #definir cores para cada um destes bin (o número de cores e o número de bins tem de ser igual)"
"0","mypalette <- colorBin( palette=mycolors, domain=comm_pt$Incidencia, na.color=""transparent"", bins=mybins)"
"0",""
"0","# Prepare the text for tooltips:"
"0","mytext <- paste("
"0","    ""Concelho: "", comm_pt$NAME_2,""<br/>"","
"0","    ""Incidência: "", comm_pt$Incidencia, ""<br/>"","
"0","    ""Categoria: "", comm_pt$Incidencia_descritivo,"
"0","    sep="""") %>%"
"0","  lapply(htmltools::HTML)"
"0",""
"0","# Final Map"
"0","leaflet(comm_pt)%>%"
"0","  addTiles()  %>%"
"0","  setView( lat=39.5, lng=-7.6, zoom=7) %>%"
"0","  addProviderTiles(""CartoDB.Positron"") %>%"
"0","  addPolygons("
"0","    fillColor = ~mypalette(Incidencia),"
"0","    stroke=TRUE,"
"0","    fillOpacity = 0.9,"
"0","    color=""grey"","
"0","    weight=0.3,"
"0","    label = mytext,"
"0","    labelOptions = labelOptions("
"0","      style = list(""font-weight"" = ""normal"", padding = ""3px 8px""),"
"0","      textsize = ""13px"","
"0","      direction = ""auto"""
"0","    )"
"0","  ) %>%"
"0","  addLegend( pal=mypalette, values=~Incidencia, opacity=0.9, title = ""Incidência"", position = ""bottomleft"" )"
